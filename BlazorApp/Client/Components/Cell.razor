@using Client.Models
@using static Core.Models.CoordinatesHelper
@using Core.Models.Ships

<div class="col table-cell @DisabledClass" @onclick=@OnMarked>
    <span class="@IconName" style="vertical-align:middle; color:@Color;" aria-hidden="true"></span>
</div>

@code {
    [Parameter]
    public CellType Type { get; set; }
    [Parameter]
    public Column Column { get; set; }
    [Parameter]
    public int Row { get; set; }
    [Parameter]
    public Color Color { get; set; }
    [Parameter]
    public bool IsDisabled { get; set; }
    [Parameter]
    public EventCallback<CoordEventArgs> OnClicked { get; set; }

    private string DisabledClass => IsDisabled switch
    {
        true => "is_disabled",
        false => string.Empty
    };

    private string IconName => Type switch
    {
        CellType.None => String.Empty,
        CellType.Flag => "oi oi-flag",
        CellType.X => "oi oi-x",
        CellType.Target => "oi oi-target",
        _ => String.Empty
    };

    public async void OnMarked()
    {
        if (IsDisabled || !OnClicked.HasDelegate)
            return;

        await OnClicked.InvokeAsync(new CoordEventArgs(Column, Row));
    }
}